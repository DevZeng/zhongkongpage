webpackJsonp([6],{"0xJ8":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{tableData:[],tableData1:[],cur_page:1,multipleSelection:[],select_cate:"",select_word:"",del_list:[],is_search:!1,editVisible:!1,delVisible:!1,form:{},idx:-1,total:0,activeName:"list",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-7776e6),e.$emit("pick",[a,t])}}]},dataText:"",schartData:[],options:{title:"财务总结",bgColor:"#009688",titleColor:"#ffffff",fillColor:"#e0f2f1",axisColor:"#ffffff",contentColor:"#999"}}},created:function(){this.getData(),this.getFinancial()},components:{Schart:a("S4mo").a},methods:{handleCurrentChange:function(e){this.cur_page=e,this.getData()},handleClick:function(e,t){console.log(e,t)},getData:function(){var e=this;$.ajax({type:"get",url:json.https+"/school/select_all_order",data:{start:e.cur_page},headers:{},success:function(t){console.log("获取全部订单返回"),console.log(t),e.total=Number(t.totle),e.tableData=t.data}})},getFinancial:function(){var e=this;$.ajax({type:"get",url:json.https+"/report/select_report",headers:{},success:function(t){console.log("获取财务总结返回"),console.log(t),e.tableData1=[t.data],e.schartData=[{name:"周总额",value:t.data.week},{name:"月总额",value:t.data.month},{name:"季度总额",value:t.data.quarter},{name:"年总额",value:t.data.year},{name:"上一季度总额",value:t.data.s_quarter}]}})},search:function(){var e=this;if(e.cur_page=1,e.total=0,e.dataText){var t=e.conversion(e.dataText[0],"yyyy-MM-dd HH:mm:ss"),a=e.conversion(e.dataText[1],"yyyy-MM-dd HH:mm:ss");$.ajax({type:"get",url:json.https+"/report/select_time_o",data:{start_time:t,end_time:a},success:function(t){console.log("根据分类搜索学校返回"),console.log(t),e.total=Number(t.msg),e.tableData=t.data}})}else e.$message.error("请选择时间段")},conversion:function(e,t){var a=new Date(e),l=function(e){return(e<10?"0":"")+e};return t.replace(/yyyy|MM|dd|HH|mm|ss/g,function(e){switch(e){case"yyyy":return l(a.getFullYear());case"MM":return l(a.getMonth()+1);case"mm":return l(a.getMinutes());case"dd":return l(a.getDate());case"HH":return l(a.getHours());case"ss":return l(a.getSeconds())}})}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-tickets"}),e._v(" 财务管理")])],1)],1),e._v(" "),a("div",{staticClass:"container"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"订单查询",name:"list"}},[a("div",{staticClass:"handle-box"},[a("el-date-picker",{attrs:{type:"datetimerange","picker-options":e.pickerOptions2,"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right"},model:{value:e.dataText,callback:function(t){e.dataText=t},expression:"dataText"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"search"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"school_id",label:"学校ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"order_id",label:"订单ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_openid",label:"用户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"用户名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_name",label:"商品名称",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_price",label:"商品价格(￥)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goods_times",label:"商品时长(天)",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"order_status",label:"订单状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.order_status?a("span",{staticClass:"green"},[e._v("已支付")]):0==t.row.order_status?a("span",{staticClass:"red"},[e._v("未支付")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"creatime",label:"创建时间",width:"150"}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"财务总结",name:"summary"}},[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData1,border:""}},[a("el-table-column",{attrs:{prop:"week",label:"周总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"month",label:"月总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"quarter",label:"季度总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"s_quarter",label:"上一季度总额"}}),e._v(" "),a("el-table-column",{attrs:{prop:"year",label:"年总额"}})],1)],1)],1)],1)])},staticRenderFns:[]};var s=a("VU/8")(l,r,!1,function(e){a("IbcI")},"data-v-be636c84",null);t.default=s.exports},IbcI:function(e,t){}});